import "hashes/poseidon/poseidon" as poseidon;
import "utils/casts/u32_to_bits" as u32_to_bits;
import "utils/pack/bool/pack" as pack;


// Takes M * 2 ararys of u32 and hashes them by couples.
def hashCouplesArrays<M>(u32[M] array1, u32[M] array2) -> field[M] {
    field[M] mut result = [0; M];
    for u32 i in 0..M {
        bool[32] a1 = u32_to_bits(array1[i]);
        bool[32] a2 = u32_to_bits(array2[i]);
        result[i] = poseidon([pack([...a1, ...a2])]);
    }
    return result;
}
